<!-- recebe o unidade.login do controller/home.js após o login 
idUnidade, tipoUnidade, nomeUnidade
indicador, meta, descricao, formula, sistema, esclarecimento
total, apurado, dataApuracao
--> 
<% include ../header %>
<header>
<nav class="navbar navbar-default">
<div class="container-fluid">
	<div class="navbar-header">
		<h3 class="fonte-branca"><%= metas[0].siglaUnidade %>&nbsp- <%= metas[0].nomeUnidade %></h3>
    <h3 class="fonte-branca"></h3>
	</div>
	
	<ul class="nav navbar-nav">
		<li><%= metas[0].pontuacao %></li>
	</ul>

  <ul class="nav navbar-nav navbar-right">
    <li><h3><a href='/sair' class="fonte-branca">Sair</a></h3></li>
  </ul>
</div>
</nav>
</header>

<div class="col-md-offset-2 col-lg-8">
<table class="table table-striped table-hover">
  <tbody>
  <tr>
    <td colspan="2">
      <h1><center>RANKING</center></h1>
      <br>
    </td>
  </tr>
    <tr style="background-color:#C79F00">
      <td rowspan="5"> 
        <center><img src="/images/Medalha_Ouro.png" align="middle"></center>
        <h3> <%= pontos[0].nomeUnidade %> </h3>
        <h3> <%= (pontos[0].pontuacao).toFixed(2).toString().split('.').join(',') %> pontos </h3> 
      </td>
    </tr>
    <tr style="background-color:#C0C0C0">
      <td> 
        <h2><center> 2° lugar </center></h2>
        <h4> <%= pontos[1].nomeUnidade %> </h4>
        <h4> <%= (pontos[1].pontuacao).toFixed(2).toString().split('.').join(',') %> pontos </h4> 
      </td>
    </tr>
    <tr style="background-color:#B5A642">
      <td> 
        <h3><center> 3° lugar </center></h3>
        <h5> <%= pontos[2].nomeUnidade %> </h5>
        <h5> <%= (pontos[2].pontuacao).toFixed(2).toString().split('.').join(',') %> pontos </h5> 
      </td>
    </tr>
    <tr>
      <td> 
        <h4><center> 4° lugar </center></h3>
        <h6> <%= pontos[3].nomeUnidade %> </h6>
        <h6> <%= (pontos[3].pontuacao).toFixed(2).toString().split('.').join(',') %> pontos </h6> 
      </td>
    </tr>
    <tr>
      <td> 
        <h5><center> 5° lugar </center></h5>
        <%= pontos[4].nomeUnidade %><br>
        <%= (pontos[4].pontuacao).toFixed(2).toString().split('.').join(',') %> pontos 
      </td>
    </tr>
  </tbody>
</table> 
</div>


<% for(var i=0; i<metas.length; i++) { %>
<div class="container-fluid">
<div class="row">
<div class="col-lg-6">
<div class="panel-group" id="accordion<%= [i] %>">
<% if(metaAtingida[i]) { %>
	  <div class="panel panel-success">
  <% } else { %>
    <div class="panel panel-danger">
  <% } %> <!-- Fim do if-else -->
  <div class="panel-heading">
    <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion1" href="#collapseOne<%= [i] %>1"><center><%= metas[i].indicador %></center></a></h4>
  </div>
  <div id="collapseOne<%= [i] %>1" class="panel-collapse collapse in">
    <div class="panel-body">
<!-- Progress bar das metas -->
      <h3>Meta: <%= metas[i].meta.toFixed(2) %>%<h3>
      <h3>Atingido: <%= resultado[i] %>%<h3> 
	    <div class="progress progress-striped active">
	     <% if(metaAtingida[i]) { %>
	       <div class="progress-bar progress-bar-success" style="width: <%= resultado[i] %>%">
	     <% } else { %>
	       <div class="progress-bar progress-bar-danger" style="width: <%= resultado[i] %>%">
	     <% } %> <!-- Fim do if-else -->
	       <%= resultado[i] %>%
	       </div>
	    </div>
<!-- Progress bar das metas -->
<!-- Frase de Feedback -->
      <center><small>
	    <% if(metaAtingida[i]) { %>
	        Parabéns!!! Continue com o bom trabalho para manter a meta. :)
	    <% } else { %>
	        Cuidado!!! Esta meta não está garantida. :(
	    <% } %> <!-- Fim do if-else -->
      </center></small>
<!-- Frase de Feedback -->
      </div>
  </div>
  </div>
  
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion<%= [i] %>" href="#collapseTwo<%= [i] %>1">
      <center>Resumo</center></a></h4>
    </div>
    <div id="collapseTwo<%= [i] %>1" class="panel-collapse collapse">
<!-- Resumo -->      
      <div class="panel-body">
        <p>Realizado: <%= metas[i].apurado %></p>
        <p>Total: <%= metas[i].total %></p>
        <p>Esperado (%): <%= metas[i].meta.toFixed(2) %>%</p>
        <p>Realizado (%): <%= resultado[i] %>%</p>
        <p>Atualização : <%= metas[i].dataApuracao.toISOString().substr(0, 10).split('-').reverse().join('/') %></p>
      </div>
<!-- Resumo -->
    </div>
  </div>
  
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion<%= [i] %>" href="#collapseThree<%= [i] %>1">
      <center>Informações</center></a></h4>
    </div>
    <div id="collapseThree<%= [i] %>1" class="panel-collapse collapse">
<!-- Informações -->
      <div class="panel-body">
        <p>Indicador: <%= metas[i].indicador %></p>
        <p>Meta: <%= metas[i].descricao %></p>
        <p>Fórmula: <%= metas[i].formula %></p> 
        <p align="justify">Descrição: <%= metas[i].esclarecimento %></p>
      </div>
<!-- Informações -->
    </div>
  </div>
</div>
</div>
<br>
<br>
<% } %><!-- Fim do for -->

<% include ../footer %>